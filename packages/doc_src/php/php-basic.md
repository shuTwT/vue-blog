# PHP

PHP 是一种免费开源、跨平台、广泛流行的脚本语言，通常运行于服务器端，用来开发网站后台程序。

PHP 语法简洁，规则宽松，架构简单，基本不需要配置文件，并且内置了很多实用性强的函数，这使得 PHP 学习成本极低，使用起来非常灵活，所以曾被誉为“世界上最好的编程语言”。

## PHP基本语法

### PHP标记（4种风格）

1. XML 风格

```php
<?php
    echo "C语言中文网";
?>
```

这种风格是默认开启的而且不能禁用，因此可以保证在所有服务器上都可以使用这种风格的标记，特别是在编写一些用于不同服务器环境的应用程序时，这种标记风格尤为重要。

2. 简短风格

```php
<?
    echo "C语言中文网";
?>
```

这种标记风格是最简单的，要使用这种标记风格，需要在配置文件 php.ini 中启用 short_open_tag 选项。不过在日常的开发中并不推荐使用这种风格的标记，因为这种标记在许多环境的默认设置中已经不支持了。

3. ASP 风格（已移除）

   ```php
   <%
       echo "C语言中文网";
   %>
   ```

   这种标记风格与 ASP 或 ASP.NET 的标记风格相同，默认情况下这种风格是禁用的。如果想要使用它需要在配置设定中启用了 asp_tags 选项。

   不过该标记风格在 PHP7 中已经不再支持

4. SCRIPT 风格（已移除）

   ```php+HTML
   <script language="php">
       echo 'C语言中文网';
   </script>
   ```

该标记风格在 PHP7 中已经不再支持，大家了解即可。

### 数据类型

PHP 的数据类型可以分为三大类，分别是标量数据类型、复合数据类型和特殊数据类型，下面我们就来详细介绍一下这些数据类型。

**标量数据类型**

标量数据类型是[数据结构](http://c.biancheng.net/data_structure/)的最基础单元，只能存储一个数据。在 PHP 中的标量数据类型分为四种，如下表所示：

|       类型        |                             功能                             |
| :---------------: | :----------------------------------------------------------: |
| boolean（布尔型） |      最简单的数据类型，只有两个值：true(真) / false(假)      |
| string（字符串）  |                    字符串是连续的字符序列                    |
|  integer（整型）  |          整型包含所有的整数，可以是正数也可以是负数          |
|  float（浮点型）  | 浮点型也是用来表示数字的，与整型不同除了可以表示整数外它还可以用来表示小数和指数 |

**字符串**

字符串是连续的字符序列，在其它语言中，字符和字符串是两种不同的数据类型，但在 PHP 中，统一将字符和字符串当作字符串数据类型。在 PHP 中，定义字符串有三种方式，分别是单引号方式、双引号方式、Heredoc 方式。

示例代码如下：

```php
<?php
    //双引号方式声明字符串
    $str1 = "C语言中文网";  
    //单引号方式声明字符串
    $str2 = 'PHP 教程';      
    //Heredoc 方式声明字符串
    $str3 = <<<EOF
    url：
    http://c.biancheng.net/php/
EOF;
    echo $str1."<br>".$str2."<br>".$str3;
?>
```

**整型**

在 PHP 中，整型变量称为 integer 或 int 类型，用来表示一个整数，整型的规则如下所示：

- 整型必须至少有一个数字（0～9）；
- 整型不能包含逗号或空格；
- 整型不能包含小数点；
- 整型可以是正数或负数。


整型的取值范围必须介于 -2E31 到 2E31 之间，可以用三种格式来表示，即十进制、十六进制（以 0x 为前缀）和八进制（以 0 为前缀）。

下面通过示例来演示一下整型的使用，示例中使用到了 PHP 的 var_dump() 函数，该函数可以返回变量的数据类型和值。

```php
<?php
    $x = 5985;      // 定义一个整型数据类型的变量
    var_dump($x);   // 输出此变量
    echo "<br>";
    $x = -345;
    var_dump($x);   
    echo "<br>";
    $x = 0x8C;      //十六进制数字
    var_dump($x); 
    echo "<br>";
    $x = 047;       //八进制数字
    var_dump($x);
?>
```

注意，在 PHP7 版本中，含有十六进制字符的字符串不再被视为数字，而是当作普通的字符串，例如：

```php
<?php
    var_dump("0x123" == "291");
    echo "<br/>";
    var_dump(is_numeric("0x123"));
    echo "<br/>";
    var_dump("0xe" + "0x1");
?>
```

**浮点型**

浮点型在 PHP 中被称为 float 类型，也可称为实数，可以用来存储整数和小数，有效的取值范围是 1.8E-308 到 1.8E+308 之间。浮点数的精确度比整型数据类型要高。

示例代码如下：

```php
<?php
    $num1 = 10.365;
    $num2 = 2.4e3;
    $num3 = 8E-5;
    var_dump($num1, $num2, $num3);
?>
```

**布尔型**

布尔型只有两种值，分别是 TRUE 和 FALSE（不区分大小写），意为逻辑真和逻辑假。示例代码如下：

```php
<?php
    $x = True;
    $y = faLsE;
    var_dump($x, $y);
?>
```

**复合数据类型**

复合数据类型允许将多个类型相同的数据聚合在一起，表示为一个实体项。复合数据类型包括数组（Array）和对象（Object）。

**数组**

数组是一组数据的集合，是将数据按照一定规则组织起来形成的一个整体。数组的本质是存储管理和操作一组变量。按照数组的维度划分，可以有一维数组、二维数组和多维数组。我们可以使用 array() 函数来创建数组。

示例代码如下：

```php
<?php
    $arr = array('website' => 'C语言中文网', 'url' => 'http://c.biancheng.net/');
    echo "<pre>";   // <pre> 是一个 HTML 标签，用来格式化输出内容
    var_dump($arr);
?>
```

运行结果如下：

```
array(2) {
  ["website"]=>
  string(16) "C语言中文网"
  ["url"]=>
  string(23) "http://c.biancheng.net/"
}
```

**对象**

对象（Object）可以用于存储数据。在 PHP 中对象必须声明。首先必须使用 class 关键字声明类对象。类是可以包含属性和方法的结构。然后在类中定义数据类型，在实例化的类中使用数据类型。

在支持面向对象的语言中，可以把各个具体事物的共同特征和行为抽象成一个实体，称之为一个“类”，而对象是类使用 new 关键字实例化后的结果。

示例代码如下：

```php
<?php
    class Car  //使用 class 声明一个类对象
    {
        var $color;
        function car($color="black") {
            $this->color = $color;
        }
        function getColor() {
            return $this->color;
        }
    }
    $car = new Car();
    $car->car('red');
    echo $car->getColor();
?>
```

**特殊数据类型**

在 PHP 中，有用来专门提供服务或数据的数据类型，它不属于上述标准数据类型中的任意一类，因此也被称为特殊数据类型，主要包括 NULL 和资源数据类型。

**NULL**

NULL 在 PHP 中是一种特殊的数据类型，它只有一个值，即 NULL，表示空值（变量没有值），需要注意的是它与空格的意义不同。

当满足下列条件时，变量的值为 NULL：

- 变量被指定为 NULL 值；
- 变量在没有被赋值前，默认值为 NULL；
- 使用 unset() 函数删除一个变量后，这个变量值也为 NULL。


NULL 通常可以用来清空一个变量，示例代码如下：

```php
<?php
    $str = 'C语言中文网';
    $str = NULL;
    var_dump($str);
?>
```

**资源**

资源（Resource）在 PHP 中同样是一种特殊的数据类型。它主要描述一个 PHP 的扩展资源，例如一个数据库查询（Query）、一个打开的文件句柄（fopen）或一个数据库连接（Database Connection）以及字符流（stream）等扩展类型。

但是我们并不能直接操作这个变量类型，只能通过专门的函数来使用。

如果上面所说的某一种情况出现时，例如使用 fopen 函数打开一个本地文件时，示例代码如下

```php
<?php
    header("content-type:text/html;charset=utf-8");//设置编码，解决中文乱码
    $file = fopen("test.txt", "rw");//打开test.txt文件
    var_dump($file);
?>
```

运行结果如下：

```php
resource(3) of type (stream)
```

资源是 PHP 提供的较强特性之一，它可以在 PHP 脚本中做自定义的扩展，类似于C语言结构中的引用，它的所有属性都是私有的，大家可以暂时将其理解为面向对象中的一个实例化对象。有关资源类型我们后面还会详细介绍。

### 变量

变量在 PHP 中居于核心地位，是使用 PHP 的关键所在，变量的值在程序运行中会随时发生变化，能够为程序中准备使用的一段数据起一个简短容易记的名字，另外它还可以保存用户输入的数据或运算的结果。

**声明（创建）变量**

因为 PHP 是一种弱类型的语言，所以使用变量前不用提前声明，变量在第一次赋值时会被自动创建，这个原因使得 PHP 的语法和C语言、[Java](http://c.biancheng.net/java/) 等强类型语言有很大的不同。

声明 PHP 变量必须使用一个美元符号“$”后面跟变量名来表示，然后再使用“=”给这个变量赋值。如下所示：

```php
<?php
    $a = 1;
    $b = 2;
    $c = 3;
    echo $a.', '.$b.', '.$c;
?>
```

**变量的命名规则**

变量名并不是可以随意定义的，一个有效的变量名应该满足以下几点要求：

- 变量必须以 $ 符号开头，其后是变量的名称，$ 并不是变量名的一部分；
- 变量名必须以字母或下划线开头；
- 变量名不能以数字开头；
- 变量名只能包含字母（A~z）、数字（0~9）和下划线（_）；
- 与其它语言不通的是，PHP 中的一些关键字也可以作为变量名（例如 $true、$for）。

注意：PHP 中的变量名是区分大小写的，因此 $var 和 $Var 表示的是两个不同的变量。



### 变量赋值

**直接赋值**

直接赋值就是使用“=”直接将值赋给某变量，示例代码如下：

```php
<?php    $name = "PHP入门教程";    echo $name;?>
```

**拷贝赋值**

拷贝赋值就是将一个变量的值，“复制”一份，再传给另一个变量。这两个变量都是相互独立的，它们之间没有任何关系，修改其中一个变量的值，另一个变量不会变，示例代码如下：

```php
<?php
    $a = 100;
    $b = $a;    // 将$a的值复制一份，传给$b
    $a = 200;   // 重新为 $a 赋值
    echo '$a = '.$a.', $b = '.$b;
?>
```

**引用赋值**

引用赋值就是将一个变量的内存地址，“复制”一份，传给另一个变量。这两个变量代表的是同一个值。改变其中一个，另一个也会改变。

实现引用赋值需要在被引用的变量前加上“&”符号，示例代码如下：

```php
<?php
    $a = 100;
    $b = &$a;   // 将$a的地址复制一份，传给$b
    $a = 200;   // 重新为 $a 赋值
    echo '$a = '.$a.', $b = '.$b;
?>
```